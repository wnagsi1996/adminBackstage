(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f339608"],{b694:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"product",attrs:{model:e.product,rules:e.productRule,"label-width":"80px","label-position":"top"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"退款渠道",prop:"channel"}},[r("el-select",{attrs:{placeholder:"请选择退款渠道"},model:{value:e.product.channel,callback:function(t){e.$set(e.product,"channel",t)},expression:"product.channel"}},[r("el-option",{attrs:{label:"微信",value:"0"}}),r("el-option",{attrs:{label:"支付宝",value:"1"}}),r("el-option",{attrs:{label:"银行转账",value:"2"}}),r("el-option",{attrs:{label:"PayPal",value:"3"}})],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"货币类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择货币类型"},on:{change:e.switchCurrency},model:{value:e.product.type,callback:function(t){e.$set(e.product,"type",t)},expression:"product.type"}},[r("el-option",{attrs:{label:"人民币",value:"0"}}),r("el-option",{attrs:{label:"美元",value:"1"}})],1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"退款产品费",prop:"money"}},[r("el-input",{model:{value:e.product.money,callback:function(t){e.$set(e.product,"money",t)},expression:"product.money"}})],1)],1),0!=e.product.yjmoney?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"刷手佣金",prop:"yjmoney"}},[r("el-input",{model:{value:e.product.yjmoney,callback:function(t){e.$set(e.product,"yjmoney",t)},expression:"product.yjmoney"}})],1)],1):e._e(),0!=e.product.yjmoney?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"总退款",prop:"totalMoney"}},[r("el-input",{model:{value:e.product.totalMoney,callback:function(t){e.$set(e.product,"totalMoney",t)},expression:"product.totalMoney"}})],1)],1):e._e(),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:e.product.remark,callback:function(t){e.$set(e.product,"remark",t)},expression:"product.remark"}})],1)],1),r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.submitForm("product")}}},[e._v("提交")])],1)],1)],1)],1)},a=[],n=r("f4aa"),s=n["a"],c=r("2877"),l=Object(c["a"])(s,o,a,!1,null,null,null);t["default"]=l.exports},f4aa:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__["a"]={name:"Chargeback",props:{orderno:{type:String,default:""}},data:function(){return{product:{channel:"",money:"",yjmoney:"",totalMoney:"",remark:"",type:""},productRule:{money:[{required:!0,message:"请输入退款产品费",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"退款产品费必须为数字"}],yjmoney:[{required:!0,message:"请输入退款佣金",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"退款佣金必须为数字"}],channel:[{required:!0,message:"请选择收款渠道",trigger:"change"}],type:[{required:!0,message:"请选择货币类型",trigger:"change"}]},neworderno:"",btnLoading:!1,ordertype:0,orderdata:{}}},mounted:function(){this.neworderno=this.orderno,this.getbackorder()},methods:{getbackorder:function(){var e=this;this.axios.get("/Handler/CPManageSystem.ashx?cmd=getBackProductMoney&orderno="+this.neworderno).then((function(t){Object.keys(t.data).length>0?e.orderdata=t.data:e.$message({type:"warning",message:"退单数据获取失败!"})})).catch((function(t){e.$message({type:"warning",message:"退单数据获取失败!"})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&("0"==t.product.money?t.$message({type:"warning",message:"退款金额不能为0!"}):(t.btnLoading=!0,t.axios.post("/Handler/CPManageSystem.ashx",t.qs.stringify({cmd:"backProductFK",orderno:t.neworderno,sktype:t.product.channel,remark:t.product.remark,currency:t.product.type,tkmoney:t.product.money,yjmoney:t.product.yjmoney})).then((function(e){e.data.rescode>0?(t.$message({type:"success",message:"退单已提交给财务确认"}),t.$emit("dialogToggle"),t.resetForm()):t.$message({type:"warning",message:e.data.resdesc}),t.btnLoading=!1})).catch((function(e){}))))}))},resetForm:function(){this.$refs.product.resetFields()},switchCurrency:function switchCurrency(even){0==even?(this.product.money=this.orderdata.cpf_rmb,this.product.yjmoney=this.orderdata.yj_rmb):(this.product.money=this.orderdata.cpf_usd,this.product.yjmoney=this.orderdata.yj_usd),this.product.totalMoney=eval(this.product.money)+eval(this.product.yjmoney)}},watch:{orderno:function(e,t){this.neworderno=e,this.getbackorder()}}}}}]);
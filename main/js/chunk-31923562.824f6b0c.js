(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31923562"],{"0038":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v(t._s(t._f("ordernofilter")(this.ordernodata))+" "),n("i",{staticClass:"el-icon-document-copy",on:{click:function(e){return t.copyorderno()}}})])])},i=[],a={name:"OrderCopy",props:{orderno:{type:String,default:""}},data:function(){return{ordernodata:""}},mounted:function(){this.ordernodata=this.orderno},methods:{copyorderno:function(){var t=document.createElement("input");t.value=this.ordernodata,document.body.appendChild(t),t.select(),document.execCommand("Copy"),this.$message({message:"复制成功",type:"success"}),t.remove()}},filters:{ordernofilter:function(t){var e,n;return t.length>10?(e=t.substring(0,5),n=t.substring(t.length-5,t.length),e+"..."+n):t}},watch:{orderno:function(t,e){this.ordernodata=t}}},r=a,l=n("2877"),s=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=s.exports},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"14c3":function(t,e,n){var o=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==o(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"2a0b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:18}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.fromorder}},[n("el-form-item",{attrs:{label:"创建时间"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{prop:"months"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"开始时间","value-format":"yyyy-MM"},model:{value:t.fromorder.months,callback:function(e){t.$set(t.fromorder,"months",e)},expression:"fromorder.months"}})],1)],1),n("el-col",{staticClass:"line",attrs:{span:1}},[t._v("-")]),n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{prop:"monthe"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"结束时间","value-format":"yyyy-MM"},model:{value:t.fromorder.monthe,callback:function(e){t.$set(t.fromorder,"monthe",e)},expression:"fromorder.monthe"}})],1)],1)],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)],1),n("div",{staticClass:"tableMag"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"curmonth",label:"月份","min-width":"4%"}}),n("el-table-column",{attrs:{prop:"profit",label:"利润","min-width":"4%"}}),n("el-table-column",{attrs:{prop:"cjsj",label:"创建时间","min-width":"5%"}}),n("el-table-column",{attrs:{prop:"bgsj",label:"变更时间","min-width":"5%"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"2%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.hankLog(e.row.curmonth)}}},[t._v("详情")])]}}])})],1)],1),n("Pagination",{staticClass:"pagination",attrs:{pagination:t.pagination},on:{search:t.search}})],1),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"profit-total"},[n("p",[t._v("营业收入："),n("em",[t._v(t._s(t.porfitTotal.totalprofit))])]),n("p",[t._v("剩余金额："),n("em",[t._v(t._s(t.porfitTotal.curjprofit))])]),n("p",[t._v("应收账款："),n("em",[t._v(t._s(t.porfitTotal.tqprofit))])]),n("div",{staticClass:"profit-total-btn"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.hankUpload}},[t._v("利润提取")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.hankLog()}}},[t._v("利润日志")])],1)])])],1),n("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.Visible,width:t.dialog.width},on:{"update:visible":function(e){return t.$set(t.dialog,"Visible",e)}}},[n(t.dialog.dialogComponent,{tag:"component",attrs:{month:t.month},on:{dialogToggle:t.dialogToggle}})],1)],1)},i=[],a=(n("d3b7"),n("ac1f"),n("841c"),n("333d")),r=n("0038"),l={name:"Profit",components:{Pagination:a["a"],copyorderno:r["a"]},data:function(){return{tableData:[],pagination:{total:0,size:20,current:1},fromorder:{months:"",monthe:""},porfitTotal:{curjprofit:0,tqprofit:0,totalprofit:0},dialog:{title:"",Visible:!1,width:"",dialogComponent:null},month:"",profitcom:null,profituploadcom:null}},created:function(){this.search(),this.getTotalProfit()},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0!=e.length&&("current"==e[0]?this.pagination.current=e[1]:"size"==e[0]&&(this.pagination.size=e[1])),this.loading=!0,this.axios.post("/Handler/CPManageSystem.ashx?cmd=getMonthProfitList",this.qs.stringify({pageNum:this.pagination.current-1,pageSize:this.pagination.size,months:this.fromorder.months,monthe:this.fromorder.monthe})).then((function(e){t.pagination.total=e.data.results,t.tableData=e.data.rows,t.loading=!1})).catch((function(t){}))},getTotalProfit:function(){var t=this;this.axios.get("/Handler/CPManageSystem.ashx?cmd=getTotalProfit").then((function(e){1==e.data.rescode&&(t.porfitTotal.curjprofit=e.data.curjprofit,t.porfitTotal.tqprofit=e.data.tqprofit,t.porfitTotal.totalprofit=e.data.curjprofit+e.data.tqprofit)})).catch((function(t){}))},hankLog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.dialog.title="利润日志",this.dialog.Visible=!0,this.dialog.width="70%",null==this.profitcom&&(this.profitcom=function(){return n.e("chunk-9677f152").then(n.bind(null,"dc0b"))}),this.month=t,this.dialog.dialogComponent=this.profitcom},hankUpload:function(){this.dialog.title="利润提取",this.dialog.Visible=!0,this.dialog.width="300px",null==this.profituploadcom&&(this.profituploadcom=function(){return n.e("chunk-2d0db43c").then(n.bind(null,"6eb9"))}),this.dialog.dialogComponent=this.profituploadcom},dialogToggle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.dialog.title="",this.dialog.Visible=!1,this.dialog.width="",""!=t&&this.getTotalProfit()}}},s=l,c=(n("5d75"),n("2877")),u=Object(c["a"])(s,o,i,!1,null,"7eeff7eb",null);e["default"]=u.exports},"2b4c":function(t,e,n){},"333d":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total>t.pagination.size,expression:"pagination.total>pagination.size"}],attrs:{background:"","current-page":t.pagination.current,"page-sizes":t.pagination.sizes,"page-size":t.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},i=[],a={name:"Pagination",props:{pagination:{type:Object,default:function(){return{size:20,current:0,total:0,sizes:[20,50,100,200]}}}},methods:{handleSizeChange:function(t){var e=["size",t];this.$emit("search",e)},handleCurrentChange:function(t){var e=["current",t];this.$emit("search",e)}}},r=a,l=n("2877"),s=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=s.exports},"5d75":function(t,e,n){"use strict";var o=n("2b4c"),i=n.n(o);i.a},"841c":function(t,e,n){"use strict";var o=n("d784"),i=n("825a"),a=n("1d80"),r=n("129f"),l=n("14c3");o("search",1,(function(t,e,n){return[function(e){var n=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n):new RegExp(e)[t](String(n))},function(t){var o=n(e,t,this);if(o.done)return o.value;var a=i(t),s=String(this),c=a.lastIndex;r(c,0)||(a.lastIndex=0);var u=l(a,s);return r(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))},9263:function(t,e,n){"use strict";var o=n("ad6d"),i=n("9f7f"),a=RegExp.prototype.exec,r=String.prototype.replace,l=a,s=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=i.UNSUPPORTED_Y||i.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=s||u||c;d&&(l=function(t){var e,n,i,l,d=this,p=c&&d.sticky,f=o.call(d),h=d.source,g=0,m=t;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,g++),n=new RegExp("^(?:"+h+")",f)),u&&(n=new RegExp("^"+h+"$(?!\\s)",f)),s&&(e=d.lastIndex),i=a.call(p?n:d,m),p?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:s&&i&&(d.lastIndex=d.global?i.index+i[0].length:e),u&&i&&i.length>1&&r.call(i[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(i[l]=void 0)})),i}),t.exports=l},"9f7f":function(t,e,n){"use strict";var o=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=o((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=o((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,n){"use strict";var o=n("23e7"),i=n("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},d784:function(t,e,n){"use strict";n("ac1f");var o=n("6eeb"),i=n("d039"),a=n("b622"),r=n("9263"),l=n("9112"),s=a("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var h=a(t),g=!i((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),m=g&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[s]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!g||!m||"replace"===t&&(!c||!u||p)||"split"===t&&!f){var v=/./[h],b=n(h,""[t],(function(t,e,n,o,i){return e.exec===r?g&&!i?{done:!0,value:v.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),x=b[0],y=b[1];o(String.prototype,t,x),o(RegExp.prototype,h,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&l(RegExp.prototype[h],"sham",!0)}}}]);
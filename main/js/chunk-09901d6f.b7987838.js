(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09901d6f"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"14c3":function(t,e,n){var a=n("c6b6"),s=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var i=n.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(t,e)}},"333d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total>t.pagination.size,expression:"pagination.total>pagination.size"}],attrs:{background:"","current-page":t.pagination.current,"page-sizes":t.pagination.sizes,"page-size":t.pagination.size,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},s=[],i={name:"Pagination",props:{pagination:{type:Object,default:function(){return{size:20,current:0,total:0,sizes:[20,50,100,200]}}}},methods:{handleSizeChange:function(t){var e=["size",t];this.$emit("search",e)},handleCurrentChange:function(t){var e=["current",t];this.$emit("search",e)}}},r=i,o=n("2877"),l=Object(o["a"])(r,a,s,!1,null,null,null);e["a"]=l.exports},"841c":function(t,e,n){"use strict";var a=n("d784"),s=n("825a"),i=n("1d80"),r=n("129f"),o=n("14c3");a("search",1,(function(t,e,n){return[function(e){var n=i(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,t,this);if(a.done)return a.value;var i=s(t),l=String(this),u=i.lastIndex;r(u,0)||(i.lastIndex=0);var c=o(i,l);return r(i.lastIndex,u)||(i.lastIndex=u),null===c?-1:c.index}]}))},9263:function(t,e,n){"use strict";var a=n("ad6d"),s=n("9f7f"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,l=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=s.UNSUPPORTED_Y||s.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],d=l||c||u;d&&(o=function(t){var e,n,s,o,d=this,m=u&&d.sticky,h=a.call(d),p=d.source,g=0,f=t;return m&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),f=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",f=" "+f,g++),n=new RegExp("^(?:"+p+")",h)),c&&(n=new RegExp("^"+p+"$(?!\\s)",h)),l&&(e=d.lastIndex),s=i.call(m?n:d,f),m?s?(s.input=s.input.slice(g),s[0]=s[0].slice(g),s.index=d.lastIndex,d.lastIndex+=s[0].length):d.lastIndex=0:l&&s&&(d.lastIndex=d.global?s.index+s[0].length:e),c&&s&&s.length>1&&r.call(s[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(s[o]=void 0)})),s}),t.exports=o},"9f7f":function(t,e,n){"use strict";var a=n("d039");function s(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,n){"use strict";var a=n("23e7"),s=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},cd2d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.fromAccount}},[n("el-form-item",{attrs:{label:"操作人员"}},[n("el-select",{on:{focus:t.hankName},model:{value:t.fromAccount.name,callback:function(e){t.$set(t.fromAccount,"name",e)},expression:"fromAccount.name"}},[n("el-option",{attrs:{label:"全部",value:"0"}}),t._l(t.userList,(function(t){return n("el-option",{key:t.userid,attrs:{label:t.username,value:t.userid}})}))],2)],1),n("el-form-item",{attrs:{label:"月份"}},[n("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:t.fromAccount.monthly,callback:function(e){t.$set(t.fromAccount,"monthly",e)},expression:"fromAccount.monthly"}})],1),n("el-form-item",{attrs:{label:"分类"}},[n("el-select",{model:{value:t.fromAccount.user,callback:function(e){t.$set(t.fromAccount,"user",e)},expression:"fromAccount.user"}},[n("el-option",{attrs:{label:"全部",value:"-1"}}),n("el-option",{attrs:{label:"买家端",value:"1"}}),n("el-option",{attrs:{label:"卖家端",value:"0"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)],1),n("div",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.setMonthInfo()}}},[t._v("新建月份目标")])],1),n("div",{staticClass:"tableMag"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[n("el-table-column",{attrs:{prop:"date",label:"序号",type:"index",index:t.indexMethod,"min-width":"5%"}}),n("el-table-column",{attrs:{prop:"username",label:"人员名称","min-width":"5%"}}),n("el-table-column",{attrs:{prop:"plantnum",label:"目标单数","min-width":"6%"}}),n("el-table-column",{attrs:{prop:"month",label:"目标月份","min-width":"6%"}}),n("el-table-column",{attrs:{prop:"usertype",label:"类别","min-width":"5%",formatter:t.typeMethod}}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"7%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.setMonthInfo(e.row)}}},[t._v("编辑")])]}}])})],1)],1),n("Pagination",{staticClass:"pagination",attrs:{pagination:t.pagination},on:{search:t.search}}),n("el-dialog",{attrs:{title:"月份目标",visible:t.dialogVisible,width:"300px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("SetMonthTarget",{attrs:{userMonthAims:t.userMonthAims},on:{dialogMonthToggle:t.dialogMonthToggle}})],1)],1)},s=[],i=(n("b0c0"),n("ac1f"),n("841c"),n("333d")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"aims",attrs:{model:t.aims,rules:t.aimsRule,"label-width":"80px","label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[""==t.rid?[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{prop:"status"}},[n("el-radio-group",{on:{change:t.hankStatus},model:{value:t.aims.status,callback:function(e){t.$set(t.aims,"status",e)},expression:"aims.status"}},[n("el-radio",{attrs:{border:"",label:"买家端"}}),n("el-radio",{attrs:{border:"",label:"卖家端"}})],1)],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"成员",prop:"user"}},[n("el-select",{attrs:{placeholder:"请选择成员"},model:{value:t.aims.user,callback:function(e){t.$set(t.aims,"user",e)},expression:"aims.user"}},t._l(t.userList,(function(t){return n("el-option",{key:t.userid,attrs:{label:t.username,value:t.userid}})})),1)],1)],1)]:t._e(),n("el-col",{attrs:{span:20}},[n("el-form-item",{attrs:{label:"目标单数",prop:"ordernum"}},[n("el-input",{model:{value:t.aims.ordernum,callback:function(e){t.$set(t.aims,"ordernum",t._n(e))},expression:"aims.ordernum"}})],1)],1),n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"月份",prop:"monthly"}},[n("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"yyyy 年 MM 月","value-format":"yyyy-MM"},model:{value:t.aims.monthly,callback:function(e){t.$set(t.aims,"monthly",e)},expression:"aims.monthly"}})],1)],1),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:t.btnLoading,"close-on-click-modal":"false"},on:{click:function(e){return t.submitForm("aims")}}},[t._v("立即创建")])],1)],1)],2)],1)},o=[],l=(n("b64b"),{name:"SetMonthTarget",props:{userMonthAims:{type:Object,default:new Object}},data:function(){return{jdUserList:[],fdUserList:[],userList:[],aims:{status:"",user:"",ordernum:"",monthly:""},statusID:0,aimsRule:{status:[{required:!0,message:"请选择买家端或卖家端",trigger:"change"}],user:[{required:!0,message:"请选择用户，无数据请先选择买卖家端",trigger:"change"}],ordernum:[{required:!0,message:"请输入目标单数"},{type:"number",message:"目标单数只能为数字"}],monthly:[{required:!0,message:"请选择月份",trigger:"change"}]},rid:"",btnLoading:!1}},mounted:function(){this.ifRID(this.userMonthAims)},methods:{getJdUserList:function(){var t=this;0==this.jdUserList.length?this.axios.get("/Handler/CPManageSystem.ashx?cmd=getMJUserList&pageindex=0&len=50").then((function(e){0!=e.data.results&&(t.jdUserList=e.data.rows,t.userList=t.jdUserList)})).catch((function(t){})):this.userList=this.jdUserList},getFdUserList:function(){var t=this;0==this.fdUserList.length?this.axios.get("/Handler/CPManageSystem.ashx?cmd=getMMJUserList&pageindex=0&len=50").then((function(e){0!=e.data.results&&(t.fdUserList=e.data.rows,t.userList=t.fdUserList)})).catch((function(t){})):this.userList=this.fdUserList},hankStatus:function(t){"买家端"==t?(this.getFdUserList(),this.statusID=1):(this.getJdUserList(),this.statusID=0)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.btnLoading=!0,""==e.rid?e.axios.get("/Handler/CPManageSystem.ashx?cmd=addUserPlant",{params:{month:e.aims.monthly,usertype:e.statusID,plantnum:e.aims.ordernum,userid:e.aims.user}}).then((function(t){t.data>0?(e.$message({type:"success",message:"设置成功"}),e.resetForm(),e.$emit("dialogMonthToggle"),e.resetForm(),e.rid=""):e.$message({type:"warning",message:"设置失败"})})):e.axios.get("/Handler/CPManageSystem.ashx?cmd=editUserPlant",{params:{month:e.aims.monthly,plantnum:e.aims.ordernum,rid:e.rid}}).then((function(t){t.data>0?(e.$message({type:"success",message:"编辑成功"}),e.resetForm(),e.$emit("dialogMonthToggle"),e.rid=""):e.$message({type:"warning",message:"编辑失败"}),e.btnLoading=!1}))}))},resetForm:function(){this.$refs.aims.resetFields()},ifRID:function(t){Object.keys(t).length>0?(this.aims.ordernum=t.plantnum,this.aims.monthly=t.month,this.rid=t.rid,this.aims.status="1",this.aims.user="1"):(this.rid="",this.resetForm(),this.aims.user="")}},watch:{userMonthAims:function(t,e){this.ifRID(t)}}}),u=l,c=n("2877"),d=Object(c["a"])(u,r,o,!1,null,null,null),m=d.exports,h={name:"",components:{Pagination:i["a"],SetMonthTarget:m},data:function(){return{fromAccount:{name:"0",monthly:"",selstate:"-1"},tableData:[],pagination:{total:0,size:20,current:1},loading:!0,userMonthAims:{},userList:[],dialogVisible:!1}},mounted:function(){this.search()},methods:{search:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0!=e.length&&("current"==e[0]?this.pagination.current=e[1]:"size"==e[0]&&(this.pagination.size=e[1])),this.loading=!0,this.axios.get("/Handler/CPManageSystem.ashx?cmd=getUserPlantList",{params:{pageSize:this.pagination.size,pageNum:this.pagination.current-1,month:this.fromAccount.monthly,usertype:this.fromAccount.selstate,userid:this.fromAccount.name}}).then((function(e){0!=e.data.results&&(t.pagination.total=e.data.results,t.tableData=e.data.rows,t.loading=!1),t.loading=!1})).catch((function(t){}))},setMonthInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.userMonthAims=""!=t?t:{},this.dialogVisible=!0},hankName:function(){0==this.userList.length&&this.getUserList()},dialogMonthToggle:function(){this.dialogVisible=!1,this.search()},typeMethod:function(t){return 0==t.usertype?"卖家端":"买家端"},getUserList:function(){var t=this;0==this.userList.length&&this.axios.get("/Handler/CPManageSystem.ashx?cmd=getCPMMJUserList&pageindex=0&len=50").then((function(e){0!=e.data.rows.length&&(t.userList=e.data.rows)})).catch((function(t){}))},indexMethod:function(t){return t+1}}},p=h,g=Object(c["a"])(p,a,s,!1,null,null,null);e["default"]=g.exports},d784:function(t,e,n){"use strict";n("ac1f");var a=n("6eeb"),s=n("d039"),i=n("b622"),r=n("9263"),o=n("9112"),l=i("species"),u=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!s((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var p=i(t),g=!s((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),f=g&&!s((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!g||!f||"replace"===t&&(!u||!c||m)||"split"===t&&!h){var b=/./[p],x=n(p,""[t],(function(t,e,n,a,s){return e.exec===r?g&&!s?{done:!0,value:b.call(e,n,a)}:{done:!0,value:t.call(n,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),v=x[0],y=x[1];a(String.prototype,t,v),a(RegExp.prototype,p,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}d&&o(RegExp.prototype[p],"sham",!0)}}}]);
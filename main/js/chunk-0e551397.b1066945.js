(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e551397"],{"02cc":function(e,t,n){},"5bd4":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__["a"]={name:"BatchSend",props:{orderno:{type:String,default:""},dataObj:{type:Array,default:new Array}},data:function(){return{neworderno:"",newdataObj:[],number:"",keywordfdnum:[],fdNum:0,btnLoading:!1}},mounted:function(){this.assignment()},methods:{assignment:function(){this.neworderno=this.orderno,this.dataObj.forEach((function(e){e.num=0})),this.newdataObj=this.dataObj},submit:function submit(row){row.num>row.canfdnum?this.$message({message:"放单数量不能大于可放数量",type:"warning"}):(this.keywordfdnum=[{keyword:row.keyword,fdnum:row.num}],this.fdNum=eval(row.num),this.submitAjax())},allSubmit:function allSubmit(){var _this=this;this.newdataObj.forEach((function(item){if(item.num>item.canfdnum)return _this.$message({message:"关键词"+item.keyword+"的放单数量不能大于可放数量",type:"warning"}),!1;_this.keywordfdnum.push({keyword:item.keyword,fdnum:item.num}),_this.fdNum+=eval(item.num)})),this.newdataObj.length==this.keywordfdnum.length&&(this.submitAjax(),this.btnLoading=!0)},submitAjax:function submitAjax(){var _this2=this;this.axios.post("/Handler/CPManageSystem.ashx?cmd=setKeyWordFDNum",this.qs.stringify({orderno:this.neworderno,keywordfdnum:JSON.stringify(this.keywordfdnum)})).then((function(res){if(res.data.rescode>0){if(_this2.fdNum==res.data.resdesc)_this2.$message({message:"放单成功",type:"success"});else{var num=eval(_this2.fdNum)-eval(res.data.resdesc);_this2.$message({message:"成功放单"+res.data.resdesc+",失败"+num,type:"success"})}_this2.keywordfdnum.length>1?_this2.$emit("dialogToggle"):_this2.newdataObj.forEach((function(e,t){e.keyword==_this2.keywordfdnum[0].keyword&&(_this2.newdataObj[t].num=0,_this2.onInput())})),_this2.keywordfdnum=[],_this2.fdNum=0}else _this2.$message({message:"提交失败!",type:"warning"});_this2.btnLoading=!1})).catch((function(e){_this2.btnLoading=!1}))},onInput:function(){this.$forceUpdate()}},watch:{orderno:function(e,t){this.neworderno=e},dataObj:function(e,t){this.newdataObj=e,this.assignment()}},filters:{keywordNull:function(e){return""==e?"无关键字":e}}}},9339:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"title",attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[e._v("关键字")]),n("el-col",{attrs:{span:4}},[e._v("可放单数")]),n("el-col",{attrs:{span:4}},[e._v("数量")]),n("el-col",{attrs:{span:4}},[e._v("操作")])],1),e._l(e.newdataObj,(function(t,s){return n("el-row",{key:s,staticClass:"table-info",attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[e._v(e._s(e._f("keywordNull")(t.keyword)))]),n("el-col",{attrs:{span:4}},[e._v(e._s(t.canfdnum))]),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{type:"text",size:"mini",onkeyup:"value=value.replace(/[^\\d]/g,'')"},on:{input:function(t){return e.onInput()}},model:{value:t.num,callback:function(n){e.$set(t,"num",e._n(n))},expression:"item.num"}})],1),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.submit(t)}}},[e._v("提交")])],1)],1)})),n("div",{staticClass:"tableMag"},[n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.allSubmit()}}},[e._v("全部提交")])],1)],2)},a=[],_=n("5bd4"),r=_["a"],i=(n("bfff"),n("2877")),o=Object(i["a"])(r,s,a,!1,null,"75c1902f",null);t["default"]=o.exports},bfff:function(e,t,n){"use strict";var s=n("02cc"),a=n.n(s);a.a}}]);
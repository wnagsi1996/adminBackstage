(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3478c338","chunk-31777e0e"],{"0104":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2ca0"),core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_string_starts_with__WEBPACK_IMPORTED_MODULE_0__),_components_PaseImage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("404a");__webpack_exports__["a"]={name:"BackOrder",components:{PaseImage:_components_PaseImage__WEBPACK_IMPORTED_MODULE_1__["default"]},props:{orderno:{type:String,default:""}},data:function(){return{product:{lpnum:"",mpnum:"",ytproductprice:"",commission:"",stmoney:"",channel:"",account:"",remark:"",imgurl:""},productRule:{lpnum:[{required:!0,message:"请输入留评单数",trigger:"blur"},{type:"number",message:"留评单数必须为数字"}],mpnum:[{required:!0,message:"请输入免评单数",trigger:"blur"},{type:"number",message:"免评单数必须为数字"}],ytproductprice:[{required:!0,message:"请输入应退产品费金额",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"应退产品费金额必须为数字"}],commission:[{required:!0,message:"请输入佣金金额",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"佣金金额必须为数字"}],stmoney:[{required:!0,message:"请输入实退金额，没有则填写0",trigger:"blur"},{pattern:/^\d+(\.\d+)?$/,message:"实退金额必须为数字"}],channel:[{required:!0,message:"请选择收款渠道",trigger:"change"}]},attrplaceholder:{lp:"1",mp:"1"},neworderno:"",btnLoading:!1,isorder:!1,ordertype:0}},mounted:function(){this.neworderno=this.orderno,this.isorderfun()},methods:{getordernonum:function(){var t=this;this.axios.get("/Handler/CPManageSystem.ashx?cmd=getCPOrderCanBackNum&orderno="+this.neworderno).then((function(e){""!=e.data&&(t.attrplaceholder.lp="最多可退"+e.data.lpnum+"单",t.attrplaceholder.mp="最多可退"+e.data.mpnum+"单")})).catch((function(t){}))},submitForm:function submitForm(product){var _this2=this;this.$refs[product].validate((function(valid){valid&&(""==_this2.product.account&&""==_this2.product.imgurl?_this2.$message({type:"warning",message:"收款账户或二维码不能都为空!"}):(_this2.btnLoading=!0,_this2.axios.post("/Handler/CPManageSystem.ashx",_this2.qs.stringify({cmd:"comitOrderGoBack",orderno:_this2.neworderno,ordertype:_this2.ordertype,remark:_this2.product.remark,yskmoney_product:eval(_this2.product.ytproductprice),yskmoney_yj:eval(_this2.product.commission),tkmoney:eval(_this2.product.stmoney),sktype:eval(_this2.product.channel),skaccount:_this2.product.account,mpnum:_this2.product.mpnum,lpnum:_this2.product.lpnum,_img64:_this2.product.imgurl})).then((function(t){t.data.rescode>0?(_this2.$message({type:"success",message:"退单已提交给财务返款"}),_this2.$emit("dialogToggle"),_this2.resetForm()):_this2.$message({type:"warning",message:t.data.resdesc}),_this2.btnLoading=!1})).catch((function(t){}))))}))},resetForm:function(){this.$refs.product.resetFields()},getImgSrc:function(t){this.product.imgurl=t},isorderfun:function(){this.neworderno.startsWith("D")?(this.isorder=!1,this.product.mpnum=0,this.product.lpnum=0,this.attrplaceholder.lp="",this.attrplaceholder.mp="",this.ordertype=1):(this.isorder=!0,this.getordernonum(),this.product.mpnum="",this.product.lpnum="",this.ordertype=0)}},watch:{orderno:function(t,e){this.neworderno=t,this.isorderfun()}}}},"2ca0":function(t,e,r){"use strict";var s=r("23e7"),a=r("06cf").f,o=r("50c4"),i=r("5a34"),n=r("1d80"),c=r("ab13"),l=r("c430"),u="".startsWith,m=Math.min,p=c("startsWith"),d=!l&&!p&&!!function(){var t=a(String.prototype,"startsWith");return t&&!t.writable}();s({target:"String",proto:!0,forced:!d&&!p},{startsWith:function(t){var e=String(n(this));i(t);var r=o(m(arguments.length>1?arguments[1]:void 0,e.length)),s=String(t);return u?u.call(e,s,r):e.slice(r,r+s.length)===s}})},"404a":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"copyimg"},[r("span",{directives:[{name:"show",rawName:"v-show",value:""==t.imagesrc,expression:"imagesrc==''"}]},[t._v("图片粘贴区")]),r("img",{staticClass:"copyimg-img",class:t.imgwidth?"widthauto":"heightauto",attrs:{id:"codeimg",src:t.imagesrc},on:{load:t.loadimg}})]),r("div",{staticClass:"clear-img"},[r("el-button",{attrs:{type:"text"},on:{click:t.empty}},[t._v("清空")])],1)])},a=[],o=(r("c975"),{name:"PaseImage",props:{imgsrc:{type:String,default:""}},data:function(){return{imagesrc:"",imgwidth:!0}},mounted:function(){this.imagesrc=this.imgsrc,this.setPasteImg("codeimg")},methods:{setPasteImg:function(t){var e="";document.addEventListener("paste",(function(r){if(r.clipboardData||r.originalEvent){var s=r.clipboardData||r.originalEvent.clipboardData;if(s.items){for(var a,o=0;o<s.items.length;o++)-1!==s.items[o].type.indexOf("image")&&(a=s.items[o].getAsFile());var i=new FileReader;i.onload=function(r){e=r.target.result,document.getElementById(t).setAttribute("src",e)},i.readAsDataURL(a)}}}))},loadimg:function(t){t.path[0].clientHeight>t.path[0].clientWidth?this.imgwidth=!0:this.imgwidth=!1,this.imagesrc=document.getElementById("codeimg").getAttribute("src"),this.$emit("getImgSrc",this.imagesrc)},empty:function(){this.imagesrc="",this.$emit("getImgSrc",this.imagesrc)}},watch:{imgsrc:function(t,e){this.imagesrc=t}}}),i=o,n=(r("ae37"),r("2877")),c=Object(n["a"])(i,s,a,!1,null,null,null);e["default"]=c.exports},6689:function(t,e,r){},"83b4":function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-form",{ref:"product",attrs:{model:t.product,rules:t.productRule,"label-width":"80px","label-position":"top"}},[r("el-row",{attrs:{gutter:20}},[t.isorder?[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"留评单数量",prop:"lpnum"}},[r("el-input",{attrs:{placeholder:t.attrplaceholder.lp},model:{value:t.product.lpnum,callback:function(e){t.$set(t.product,"lpnum",t._n(e))},expression:"product.lpnum"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"免评单数量",prop:"mpnum"}},[r("el-input",{attrs:{placeholder:t.attrplaceholder.mp},model:{value:t.product.mpnum,callback:function(e){t.$set(t.product,"mpnum",t._n(e))},expression:"product.mpnum"}})],1)],1)]:t._e(),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"应退总产品费",prop:"ytproductprice"}},[r("el-input",{model:{value:t.product.ytproductprice,callback:function(e){t.$set(t.product,"ytproductprice",e)},expression:"product.ytproductprice"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"应退总佣金",prop:"commission"}},[r("el-input",{model:{value:t.product.commission,callback:function(e){t.$set(t.product,"commission",e)},expression:"product.commission"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"实退金额",prop:"stmoney"}},[r("el-input",{model:{value:t.product.stmoney,callback:function(e){t.$set(t.product,"stmoney",e)},expression:"product.stmoney"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退款渠道",prop:"channel"}},[r("el-select",{attrs:{placeholder:"请选择退款渠道"},model:{value:t.product.channel,callback:function(e){t.$set(t.product,"channel",e)},expression:"product.channel"}},[r("el-option",{attrs:{label:"微信",value:"0"}}),r("el-option",{attrs:{label:"支付宝",value:"1"}}),r("el-option",{attrs:{label:"银行转账",value:"2"}}),r("el-option",{attrs:{label:"PayPal",value:"3"}})],1)],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"退款账号",prop:"account"}},[r("el-input",{model:{value:t.product.account,callback:function(e){t.$set(t.product,"account",e)},expression:"product.account"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:t.product.remark,callback:function(e){t.$set(t.product,"remark",e)},expression:"product.remark"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"收款二维码",prop:"imgsrc"}},[r("PaseImage",{attrs:{imgsrc:t.product.imgurl},on:{getImgSrc:t.getImgSrc}})],1)],1),r("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.submitForm("product")}}},[t._v("提交")])],1)],1)],2)],1)},a=[],o=r("0104"),i=o["a"],n=r("2877"),c=Object(n["a"])(i,s,a,!1,null,null,null);e["default"]=c.exports},ae37:function(t,e,r){"use strict";var s=r("6689"),a=r.n(s);a.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2109e8"],{b950:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"product",attrs:{model:t.product,rules:t.productRule,"label-width":"80px","label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"留评单数量",prop:"lpnum"}},[n("el-input",{attrs:{placeholder:t.txtlpnum},model:{value:t.product.lpnum,callback:function(e){t.$set(t.product,"lpnum",t._n(e))},expression:"product.lpnum"}})],1)],1),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"免评单数量",prop:"mpnum"}},[n("el-input",{attrs:{placeholder:t.txtmpnum},model:{value:t.product.mpnum,callback:function(e){t.$set(t.product,"mpnum",t._n(e))},expression:"product.mpnum"}})],1)],1),n("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[n("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){return t.submitForm("product")}}},[t._v("提交")])],1)],1)],1)},o=[],u={name:"Comments",props:{orderno:{type:String,default:""}},data:function(){return{product:{lpnum:"",mpnum:""},txtlpnum:"",txtmpnum:"",productRule:{lpnum:[{required:!0,message:"请输入留评单数",trigger:"blur"},{type:"number",message:"留评单数必须为数字"}],mpnum:[{required:!0,message:"请输入免评单数",trigger:"blur"},{type:"number",message:"免评单数必须为数字"}]},neworderno:"",btnLoading:!1}},mounted:function(){this.neworderno=this.orderno,this.getCPOrderCanBackNum()},methods:{getCPOrderCanBackNum:function(){var t=this;this.axios.get("/Handler/CPManageSystem.ashx?cmd=getCPOrderCanBackNum&orderno="+this.neworderno).then((function(e){""!=e.data&&(t.txtlpnum="留评还有"+e.data.lpnum+"单",t.txtmpnum="留评还有"+e.data.mpnum+"单")})).catch((function(t){}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return!1;e.btnLoading=!0,e.axios.get("/Handler/CPManageSystem.ashx?cmd=comitUpdateCPOrderMpLPNum",{params:{orderno:e.neworderno,newmpnum:e.product.mpnum,newlpnum:e.product.lpnum}}).then((function(t){t.data.rescode>0?(e.$message({type:"success",message:"修改成功!"}),e.resetForm(),e.$emit("dialogToggle")):e.$message({type:"warning",message:"修改失败!"}),e.btnLoading=!1})).catch((function(t){}))}))},resetForm:function(){this.$refs.product.resetFields()}},watch:{orderno:function(t,e){this.neworderno=t,this.getCPOrderCanBackNum()}}},a=u,m=n("2877"),s=Object(m["a"])(a,r,o,!1,null,null,null);e["default"]=s.exports}}]);